"use strict";(globalThis.webpackChunktest=globalThis.webpackChunktest||[]).push([[954],{533:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"migration-guide-v2","title":"Migration Guide: v1.x to v2.0","description":"This guide will help you migrate from Spinner v1.x to v2.0. Version 2.0 introduces significant architectural changes that improve performance and simplify the API.","source":"@site/docs/migration-guide-v2.md","sourceDirName":".","slug":"/migration-guide-v2","permalink":"/Spinner/docs/migration-guide-v2","draft":false,"unlisted":false,"editUrl":"https://github.com/Daniel-iel/Spinner/docs/migration-guide-v2.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Advanced Features","permalink":"/Spinner/docs/advanced-features"},"next":{"title":"Performance Benchmarks","permalink":"/Spinner/docs/performance-benchmarks"}}');var s=r(4848),t=r(8453);const l={sidebar_position:6},a="Migration Guide: v1.x to v2.0",o={},d=[{value:"Breaking Changes Overview",id:"breaking-changes-overview",level:2},{value:"1. Class Type Change: <code>ref struct</code> ? <code>sealed class</code>",id:"1-class-type-change-ref-struct--sealed-class",level:3},{value:"2. Constructor Changes",id:"2-constructor-changes",level:3},{value:"3. Method Signature Changes",id:"3-method-signature-changes",level:3},{value:"WriteAsString()",id:"writeasstring",level:4},{value:"WriteAsSpan()",id:"writeasspan",level:4},{value:"4. Removed Properties",id:"4-removed-properties",level:3},{value:"5. Internal Implementation Changes",id:"5-internal-implementation-changes",level:3},{value:"StringBuilder Management",id:"stringbuilder-management",level:4},{value:"Property Caching",id:"property-caching",level:4},{value:"Migration Examples",id:"migration-examples",level:2},{value:"Example 1: Writing Object to String",id:"example-1-writing-object-to-string",level:3},{value:"Example 2: Reading String to Object",id:"example-2-reading-string-to-object",level:3},{value:"Example 3: Reusing Spinner Instance",id:"example-3-reusing-spinner-instance",level:3},{value:"Performance Improvements",id:"performance-improvements",level:2},{value:"New Features in v2.0",id:"new-features-in-v20",level:2},{value:"1. Compiled Delegates for Type Conversion",id:"1-compiled-delegates-for-type-conversion",level:3},{value:"2. Improved Padding Control",id:"2-improved-padding-control",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Compilation Error: Cannot convert from &#39;MyClass&#39; to &#39;Spinner&lt;MyClass&gt;&#39;",id:"compilation-error-cannot-convert-from-myclass-to-spinnermyclass",level:3},{value:"Compilation Error: &quot;Spinner&lt;T&gt;\\ does not contain a definition for &#39;GetWriteProperties&#39;&quot;",id:"compilation-error-spinnert-does-not-contain-a-definition-for-getwriteproperties",level:3},{value:"Runtime Error: &quot;Cannot use ref struct in async method&quot;",id:"runtime-error-cannot-use-ref-struct-in-async-method",level:3},{value:"Recommended Upgrade Path",id:"recommended-upgrade-path",level:2},{value:"Benefits of Upgrading",id:"benefits-of-upgrading",level:2},{value:"Support",id:"support",level:2},{value:"Version History",id:"version-history",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"migration-guide-v1x-to-v20",children:"Migration Guide: v1.x to v2.0"})}),"\n",(0,s.jsx)(n.p,{children:"This guide will help you migrate from Spinner v1.x to v2.0. Version 2.0 introduces significant architectural changes that improve performance and simplify the API."}),"\n",(0,s.jsx)(n.h2,{id:"breaking-changes-overview",children:"Breaking Changes Overview"}),"\n",(0,s.jsxs)(n.h3,{id:"1-class-type-change-ref-struct--sealed-class",children:["1. Class Type Change: ",(0,s.jsx)(n.code,{children:"ref struct"})," ? ",(0,s.jsx)(n.code,{children:"sealed class"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public ref struct Spinner<T> where T : new()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public sealed class Spinner<T> where T : new()\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Impact:"})," ",(0,s.jsx)(n.code,{children:"Spinner<T>"})," is no longer a ",(0,s.jsx)(n.code,{children:"ref struct"}),", which means:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"? Can now be used as a field in classes"}),"\n",(0,s.jsx)(n.li,{children:"? Can be passed to async methods"}),"\n",(0,s.jsx)(n.li,{children:"? Can be stored in collections"}),"\n",(0,s.jsx)(n.li,{children:"? Better compatibility with modern C# features"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-constructor-changes",children:"2. Constructor Changes"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// Required object instance in constructor for writing\nvar obj = new MyClass("data", "value");\nvar spinner = new Spinner<MyClass>(obj);\nvar result = spinner.WriteAsString();\n\n// Default constructor for reading\nvar spinner = new Spinner<MyClass>();\nvar obj = spinner.ReadFromString(data);\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// Single constructor, object passed to methods\nvar obj = new MyClass("data", "value");\nvar spinner = new Spinner<MyClass>();\nvar result = spinner.WriteAsString(obj);  // Object passed here\n\n// Same instance for reading\nvar spinner = new Spinner<MyClass>();\nvar obj = spinner.ReadFromString(data);  // Returns object\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Migration Steps:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Remove object from constructor"}),"\n",(0,s.jsxs)(n.li,{children:["Pass object to ",(0,s.jsx)(n.code,{children:"WriteAsString()"})," or ",(0,s.jsx)(n.code,{children:"WriteAsSpan()"})," methods"]}),"\n",(0,s.jsxs)(n.li,{children:["Capture return value from ",(0,s.jsx)(n.code,{children:"ReadFromString()"})," or ",(0,s.jsx)(n.code,{children:"ReadFromSpan()"})," methods"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-method-signature-changes",children:"3. Method Signature Changes"}),"\n",(0,s.jsx)(n.h4,{id:"writeasstring",children:"WriteAsString()"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public string WriteAsString()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public string WriteAsString(T obj)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"writeasspan",children:"WriteAsSpan()"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public ReadOnlySpan<char> WriteAsSpan()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public ReadOnlySpan<char> WriteAsSpan(T obj)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-removed-properties",children:"4. Removed Properties"}),"\n",(0,s.jsx)(n.p,{children:"The following properties have been removed in v2.0:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public readonly IImmutableList<PropertyInfo> GetWriteProperties\npublic readonly IImmutableList<PropertyInfo> GetReadProperties\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// ? These properties no longer exist\n// Use reflection directly if needed:\ntypeof(T).GetProperties().Where(p => \n    p.GetCustomAttribute<WritePropertyAttribute>() != null)\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Reason:"})," These properties were rarely used and added unnecessary overhead. The metadata is still available via reflection if needed."]}),"\n",(0,s.jsx)(n.h3,{id:"5-internal-implementation-changes",children:"5. Internal Implementation Changes"}),"\n",(0,s.jsx)(n.h4,{id:"stringbuilder-management",children:"StringBuilder Management"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"private readonly PooledStringBuilder _sb = PooledStringBuilder.GetInstance();\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[ThreadStatic]\nprivate static StringBuilder builder;\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Impact:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Better thread-safety with ",(0,s.jsx)(n.code,{children:"ThreadStatic"})]}),"\n",(0,s.jsx)(n.li,{children:"Reduced allocations through reuse"}),"\n",(0,s.jsx)(n.li,{children:"No need for external pooling library"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"property-caching",children:"Property Caching"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"private static readonly PropertyInfo[] WriteProperties\nprivate static readonly PropertyInfo[] ReadProperties\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"private static readonly (PropertyInfo PropertyInfo, WritePropertyAttribute Attribute, Func<T, string> Getter)[] WriteProperties;\nprivate static readonly (PropertyInfo PropertyInfo, ReadPropertyAttribute Attribute, Action<T, string> Setter)[] ReadProperties;\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Impact:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"? Significantly faster property access via compiled delegates"}),"\n",(0,s.jsx)(n.li,{children:"?? No more reflection overhead during serialization/deserialization"}),"\n",(0,s.jsx)(n.li,{children:"?? Attributes cached to avoid repeated lookups"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"migration-examples",children:"Migration Examples"}),"\n",(0,s.jsx)(n.h3,{id:"example-1-writing-object-to-string",children:"Example 1: Writing Object to String"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[ObjectMapper(length: 50)]\npublic class Person\n{\n    [WriteProperty(length: 20, order: 1, paddingChar: ' ')]\n    public string Name { get; set; }\n    \n    [WriteProperty(length: 30, order: 2, paddingChar: ' ')]\n    public string Email { get; set; }\n}\n\n// Old way\nvar person = new Person { Name = \"John\", Email = \"john@example.com\" };\nvar spinner = new Spinner<Person>(person);\nvar result = spinner.WriteAsString();\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[ObjectMapper(length: 50)]\npublic class Person\n{\n    [WriteProperty(length: 20, order: 1, paddingChar: ' ')]\n    public string Name { get; set; }\n    \n    [WriteProperty(length: 30, order: 2, paddingChar: ' ')]\n    public string Email { get; set; }\n}\n\n// New way\nvar person = new Person { Name = \"John\", Email = \"john@example.com\" };\nvar spinner = new Spinner<Person>();\nvar result = spinner.WriteAsString(person);  // ? Pass object here\n"})}),"\n",(0,s.jsx)(n.h3,{id:"example-2-reading-string-to-object",children:"Example 2: Reading String to Object"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'var spinner = new Spinner<Person>();\nvar person = spinner.ReadFromString("John                john@example.com              ");\n// person is now populated\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'var spinner = new Spinner<Person>();\nvar person = spinner.ReadFromString("John                john@example.com              ");\n// ? Same behavior, but cleaner API\n'})}),"\n",(0,s.jsx)(n.h3,{id:"example-3-reusing-spinner-instance",children:"Example 3: Reusing Spinner Instance"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v1.x:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// Had to create new instance for each object\nvar person1 = new Person { Name = "John" };\nvar spinner1 = new Spinner<Person>(person1);\nvar result1 = spinner1.WriteAsString();\n\nvar person2 = new Person { Name = "Jane" };\nvar spinner2 = new Spinner<Person>(person2);  // New instance required\nvar result2 = spinner2.WriteAsString();\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"v2.0:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// ? Can reuse same instance\nvar spinner = new Spinner<Person>();\n\nvar person1 = new Person { Name = "John" };\nvar result1 = spinner.WriteAsString(person1);\n\nvar person2 = new Person { Name = "Jane" };\nvar result2 = spinner.WriteAsString(person2);  // Same instance!\n'})}),"\n",(0,s.jsx)(n.h2,{id:"performance-improvements",children:"Performance Improvements"}),"\n",(0,s.jsx)(n.p,{children:"Version 2.0 brings significant performance improvements:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"v1.x"}),(0,s.jsx)(n.th,{children:"v2.0"}),(0,s.jsx)(n.th,{children:"Improvement"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Property Access"}),(0,s.jsx)(n.td,{children:"Reflection"}),(0,s.jsx)(n.td,{children:"Compiled Delegates"}),(0,s.jsx)(n.td,{children:"~10-50x faster"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"StringBuilder"}),(0,s.jsx)(n.td,{children:"Pooled"}),(0,s.jsx)(n.td,{children:"ThreadStatic"}),(0,s.jsx)(n.td,{children:"Lower memory pressure"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Attribute Lookup"}),(0,s.jsx)(n.td,{children:"Per operation"}),(0,s.jsx)(n.td,{children:"Cached on startup"}),(0,s.jsx)(n.td,{children:"~100x faster"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Type Conversion"}),(0,s.jsx)(n.td,{children:"Reflection"}),(0,s.jsx)(n.td,{children:"Direct parsing"}),(0,s.jsx)(n.td,{children:"~5-10x faster"})]})]})]}),"\n",(0,s.jsx)(n.admonition,{title:"Benchmark Results",type:"tip",children:(0,s.jsxs)(n.p,{children:["For detailed benchmark comparisons showing ",(0,s.jsx)(n.strong,{children:"up to 79x faster"})," performance and ",(0,s.jsx)(n.strong,{children:"26x less"})," memory allocation, see the ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/performance-benchmarks",children:"Performance Benchmarks"})})," page."]})}),"\n",(0,s.jsx)(n.h2,{id:"new-features-in-v20",children:"New Features in v2.0"}),"\n",(0,s.jsx)(n.h3,{id:"1-compiled-delegates-for-type-conversion",children:"1. Compiled Delegates for Type Conversion"}),"\n",(0,s.jsx)(n.p,{children:"v2.0 automatically handles primitive type conversions without reflection:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"[ReadProperty(start: 0, length: 10)]\npublic int Age { get; set; }  // Automatically parsed from string to int\n\n[ReadProperty(start: 10, length: 15)]\npublic decimal Salary { get; set; }  // Automatically parsed to decimal\n\n[ReadProperty(start: 25, length: 20)]\npublic DateTime BirthDate { get; set; }  // Automatically parsed to DateTime\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Supported types: ",(0,s.jsx)(n.code,{children:"int"}),", ",(0,s.jsx)(n.code,{children:"long"}),", ",(0,s.jsx)(n.code,{children:"decimal"}),", ",(0,s.jsx)(n.code,{children:"DateTime"}),", ",(0,s.jsx)(n.code,{children:"bool"}),", ",(0,s.jsx)(n.code,{children:"TimeSpan"}),", ",(0,s.jsx)(n.code,{children:"byte"}),", ",(0,s.jsx)(n.code,{children:"sbyte"}),", ",(0,s.jsx)(n.code,{children:"short"}),", ",(0,s.jsx)(n.code,{children:"ushort"}),", ",(0,s.jsx)(n.code,{children:"uint"}),", ",(0,s.jsx)(n.code,{children:"ulong"}),", ",(0,s.jsx)(n.code,{children:"float"}),", ",(0,s.jsx)(n.code,{children:"double"}),", ",(0,s.jsx)(n.code,{children:"char"}),", ",(0,s.jsx)(n.code,{children:"nint"}),", ",(0,s.jsx)(n.code,{children:"nuint"})]}),"\n",(0,s.jsx)(n.h3,{id:"2-improved-padding-control",children:"2. Improved Padding Control"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"using Spinner.Enums;\n\n[WriteProperty(length: 10, order: 1, paddingChar: '0', padding: PaddingType.Left)]\npublic string Code { get; set; }\n\n[WriteProperty(length: 20, order: 2, paddingChar: ' ', padding: PaddingType.Right)]\npublic string Name { get; set; }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"compilation-error-cannot-convert-from-myclass-to-spinnermyclass",children:"Compilation Error: Cannot convert from 'MyClass' to 'Spinner<MyClass>'"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," You're still using the v1.x constructor pattern."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Fix:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// ? Old way\nvar spinner = new Spinner<MyClass>(obj);\n\n// ? New way\nvar spinner = new Spinner<MyClass>();\nvar result = spinner.WriteAsString(obj);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"compilation-error-spinnert-does-not-contain-a-definition-for-getwriteproperties",children:"Compilation Error: \"Spinner<T>\\ does not contain a definition for 'GetWriteProperties'\""}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," The properties were removed in v2.0."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Fix:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// ? Old way\nvar props = spinner.GetWriteProperties;\n\n// ? New way - Use reflection directly if needed\nvar props = typeof(MyClass).GetProperties()\n    .Where(p => p.GetCustomAttribute<WritePropertyAttribute>() != null)\n    .ToList();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"runtime-error-cannot-use-ref-struct-in-async-method",children:'Runtime Error: "Cannot use ref struct in async method"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause:"})," This error should no longer occur in v2.0."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Fix:"})," v2.0 uses a ",(0,s.jsx)(n.code,{children:"sealed class"})," instead of ",(0,s.jsx)(n.code,{children:"ref struct"}),", so this is no longer an issue. Your async code should work without changes."]}),"\n",(0,s.jsx)(n.h2,{id:"recommended-upgrade-path",children:"Recommended Upgrade Path"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Update NuGet Package"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dotnet add package Spinner --version 2.0.0\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Find and Replace Constructor Calls"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Search: ",(0,s.jsx)(n.code,{children:"new Spinner<(\\w+)>\\((\\w+)\\)"})]}),"\n",(0,s.jsxs)(n.li,{children:["Replace: ",(0,s.jsx)(n.code,{children:"new Spinner<$1>()"})]}),"\n",(0,s.jsx)(n.li,{children:"Then update method calls to pass the object"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Update Method Calls"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Change ",(0,s.jsx)(n.code,{children:"spinner.WriteAsString()"})," to ",(0,s.jsx)(n.code,{children:"spinner.WriteAsString(obj)"})]}),"\n",(0,s.jsxs)(n.li,{children:["Change ",(0,s.jsx)(n.code,{children:"spinner.WriteAsSpan()"})," to ",(0,s.jsx)(n.code,{children:"spinner.WriteAsSpan(obj)"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Remove Property Dependencies"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Replace ",(0,s.jsx)(n.code,{children:"GetWriteProperties"})," and ",(0,s.jsx)(n.code,{children:"GetReadProperties"})," usage with direct reflection if needed"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Test Thoroughly"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Run your unit tests"}),"\n",(0,s.jsx)(n.li,{children:"Verify serialization/deserialization still produces expected results"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"benefits-of-upgrading",children:"Benefits of Upgrading"}),"\n",(0,s.jsxs)(n.p,{children:["? ",(0,s.jsx)(n.strong,{children:"Better Performance"}),": 10-100x faster in most scenarios",(0,s.jsx)(n.br,{}),"\n","? ",(0,s.jsx)(n.strong,{children:"Lower Memory Usage"}),": ThreadStatic StringBuilder reduces allocations",(0,s.jsx)(n.br,{}),"\n","? ",(0,s.jsx)(n.strong,{children:"Cleaner API"}),": More intuitive method signatures",(0,s.jsx)(n.br,{}),"\n","? ",(0,s.jsx)(n.strong,{children:"Better Compatibility"}),": Works with async/await, collections, and class fields",(0,s.jsx)(n.br,{}),"\n","? ",(0,s.jsx)(n.strong,{children:"Type Safety"}),": Compiled delegates catch type errors at startup",(0,s.jsx)(n.br,{}),"\n","? ",(0,s.jsx)(n.strong,{children:"Future-Proof"}),": Foundation for upcoming features"]}),"\n",(0,s.jsx)(n.h2,{id:"support",children:"Support"}),"\n",(0,s.jsx)(n.p,{children:"If you encounter issues during migration:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Check the ",(0,s.jsx)(n.a,{href:"https://github.com/Daniel-iel/Spinner/issues",children:"GitHub Issues"})]}),"\n",(0,s.jsxs)(n.li,{children:["Review the ",(0,s.jsx)(n.a,{href:"https://spinnerframework.com/",children:"Documentation"})]}),"\n",(0,s.jsx)(n.li,{children:"Create a new issue with migration details"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"version-history",children:"Version History"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"v2.0.0"})," - Major architectural rewrite with breaking changes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"v1.x.x"})," - Original ref struct implementation"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>a});var i=r(6540);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);